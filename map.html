<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Explore Nearby Places</title>
  <meta name="description" content="Discover and explore the best restaurants, cafes, and attractions near you using Google Maps." />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f9fafc;
      color: #333;
    }

    header {
      background-color: #004aad;
      color: white;
      text-align: center;
      padding: 1.2rem 0;
    }

    h1 {
      font-size: 1.8rem;
      margin: 0;
    }

    #map {
      height: 70vh;
      width: 100%;
    }

    .search-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 1.5rem 0;
      gap: 10px;
    }

    input {
      width: 90%;
      max-width: 500px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    button {
      background-color: #004aad;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
    }

    button:hover {
      background-color: #003580;
    }

    #results {
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }

    .place-card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 15px;
      margin-bottom: 15px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .place-card:hover {
      transform: scale(1.02);
    }

    .place-card h3 {
      margin: 0 0 5px;
      color: #004aad;
    }

    footer {
      background-color: #004aad;
      color: white;
      text-align: center;
      padding: 1rem 0;
      font-size: 0.9rem;
    }
  </style>
</head>

<body>
  <header>
    <h1>Discover Top Spots Near You</h1>
  </header>

  <div class="search-container">
    <input id="searchInput" type="text" placeholder="Search for restaurants, cafes, or landmarks..." />
    <button id="searchButton">Search</button>
  </div>

  <div id="map"></div>

  <div id="results"></div>

  <footer>
    © 2025 Explore Nearby | Powered by Google Maps
  </footer>

  <script>
    let map;
    let service;
    let markers = [];

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 39.8283, lng: -98.5795 },
        zoom: 4,
      });

      service = new google.maps.places.PlacesService(map);

      const searchInput = document.getElementById("searchInput");
      const searchBtn = document.getElementById("searchButton");
      const resultsDiv = document.getElementById("results");

      function clearMarkers() {
        markers.forEach(m => m.setMap(null));
        markers = [];
      }

      function showResults(places) {
        clearMarkers();
        resultsDiv.innerHTML = "";

        places.slice(0, 5).forEach((place, i) => {
          if (!place.geometry || !place.geometry.location) return;

          // Add marker
          const marker = new google.maps.Marker({
            map,
            position: place.geometry.location,
            label: `${i+1}`,
          });
          markers.push(marker);

          // Add card below
          const card = document.createElement("div");
          card.className = "place-card";
          card.innerHTML = `
            <h3>${place.name}</h3>
            <p><strong>Address:</strong> ${place.formatted_address || "N/A"}</p>
            <p><strong>Category:</strong> ${place.types ? place.types[0] : "N/A"}</p>
            <p><strong>Rating:</strong> ${place.rating || "N/A"}</p>
            <p><strong>Status:</strong> ${place.business_status || "N/A"}</p>
          `;
          resultsDiv.appendChild(card);

          // Click card → zoom to marker
          card.addEventListener("click", () => {
            map.setCenter(place.geometry.location);
            map.setZoom(15);
          });
        });
      }

      searchBtn.addEventListener("click", () => {
        const query = searchInput.value || "restaurants near me";

        service.textSearch({ query }, (results, status) => {
          if (status === google.maps.places.PlacesServiceStatus.OK) {
            map.setCenter(results[0].geometry.location);
            map.setZoom(12);
            showResults(results);
          } else {
            alert("No results found for your query.");
          }
        });
      });
    }
  </script>

  <script
    async
    defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSxGuveEzKIw3enniPdcvmJrkZYXXbH-Q&libraries=places&callback=initMap"
  ></script>
</body>
</html>
