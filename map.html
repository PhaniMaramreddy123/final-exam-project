<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Discover Nearby Places</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f8fb;
    }

    header {
      background-color: #004080;
      color: white;
      text-align: center;
      padding: 20px;
    }

    h1 {
      margin: 0;
      font-size: 24px;
    }

    p.subtitle {
      margin: 5px 0 0;
      font-size: 14px;
      opacity: 0.9;
    }

    .container {
      width: 90%;
      max-width: 1000px;
      margin: 20px auto;
      text-align: center;
    }

    #map {
      height: 400px;
      width: 100%;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .search-bar {
      margin-bottom: 15px;
    }

    input[type="text"] {
      width: 70%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      padding: 10px 20px;
      background-color: #0078D7;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #005fa3;
    }

    .results {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .place-card {
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      text-align: left;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .place-card h3 {
      margin-top: 0;
      color: #004080;
    }

    .place-card p {
      margin: 3px 0;
      font-size: 14px;
    }

    footer {
      text-align: center;
      padding: 10px;
      background-color: #004080;
      color: white;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Maps</h1>
    <p class="subtitle">Find restaurants, cafes, and hidden gems around you with Google Maps.</p>
  </header>

  <div class="container">
    <div class="search-bar">
      <input id="place-input" type="text" placeholder="Search for places near you..." />
      <button id="search-btn">Search</button>
    </div>

    <p><strong>Tip:</strong> Pick a suggestion from autocomplete or type a query and click Search. Results are based on your current map view.</p>

    <div id="map"></div>

    <div class="results" id="results"></div>
  </div>

  <footer>
    Â© 2025 ExploreMap | Powered by Google Maps API
  </footer>

  <script>
    let map, service, infowindow;
    const resultsContainer = document.getElementById("results");

    function initMap() {
      const center = { lat: 39.5, lng: -98.35 }; // Center of USA
      map = new google.maps.Map(document.getElementById("map"), {
        center,
        zoom: 4.5,
      });

      infowindow = new google.maps.InfoWindow();

      document.getElementById("search-btn").addEventListener("click", () => {
        const query = document.getElementById("place-input").value.trim();
        if (!query) {
          alert("Please enter a place to search.");
          return;
        }
        searchPlaces(query);
      });
    }

    function searchPlaces(query) {
      const request = {
        query: query,
        fields: ["name", "geometry", "formatted_address", "rating", "user_ratings_total", "types", "opening_hours"],
      };
      service = new google.maps.places.PlacesService(map);
      service.textSearch(request, handleResults);
    }

    function handleResults(results, status) {
      resultsContainer.innerHTML = "";
      if (status === google.maps.places.PlacesServiceStatus.OK) {
        const topResults = results.slice(0, 5);
        topResults.forEach((place, index) => {
          createMarker(place);
          displayResult(place, index + 1);
        });
        map.setCenter(topResults[0].geometry.location);
      } else {
        resultsContainer.innerHTML = `<p>No results found. Please try another search.</p>`;
      }
    }

    function createMarker(place) {
      const marker = new google.maps.Marker({
        map,
        position: place.geometry.location,
      });
      google.maps.event.addListener(marker, "click", () => {
        infowindow.setContent(place.name);
        infowindow.open(map, marker);
      });
    }

    function displayResult(place, index) {
      const div = document.createElement("div");
      div.classList.add("place-card");

      const name = place.name || "Unknown Place";
      const address = place.formatted_address || "No address available";
      const type = place.types ? place.types[0].replace("_", " ") : "N/A";
      const rating = place.rating ? `${place.rating} (${place.user_ratings_total || 0} reviews)` : "No ratings";
      const status = place.opening_hours
        ? place.opening_hours.open_now
          ? "Open now"
          : "Closed"
        : "Status unavailable";

      div.innerHTML = `
        <h3>${index}. ${name}</h3>
        <p><strong>Address:</strong> ${address}</p>
        <p><strong>Category:</strong> ${type}</p>
        <p><strong>Rating:</strong> ${rating}</p>
        <p><strong>Status:</strong> ${status}</p>
      `;

      resultsContainer.appendChild(div);
    }
  </script>

  <!-- Replace YOUR_API_KEY_HERE with your actual key -->
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSxGuveEzKIw3enniPdcvmJrkZYXXbH-Q&libraries=places&callback=initMap">
  </script>
</body>
</html>

